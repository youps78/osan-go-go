<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>분리수GO - 결과</title>
    <!--
    @file: result.html
    @description: '분리수GO' 웹 애플리케이션의 분리수거 결과 페이지입니다.
                  분리수거 성공/실패 여부, 획득 점수, 실패 사유 등을 사용자에게 피드백합니다.
                  일정 시간 후 자동으로 메인 화면으로 돌아가거나, 버튼을 통해 즉시 이동할 수 있습니다.
    @version: 1.0.0
    @date: 2025-06-08
    @author: 오산고 이현서

    @changes:
      - 1.0.0 (2025-06-08): 초기 버전. 성공/실패 메시지, 점수/사유 표시, 자동 리다이렉트 로직 구현.
                           주석 추가.
    -->

    <!-- 라이브러리 설치 방법:
    이 웹 애플리케이션은 백엔드(Python Flask)와 통신하며, 프론트엔드에서는 별도의 라이브러리 설치가 필요 없습니다.
    백엔드 라이브러리 설치는 프로젝트 루트 디렉토리에서 'pip install -r requirements.txt' 명령어를 사용합니다.
    -->
    <style>
        /*
        @section: Global Styles
        @description: 웹 페이지 전체에 적용되는 기본 스타일입니다.
                      폰트, 여백, 배경색 등을 설정하고, Flexbox를 사용하여 요소를 중앙에 배치합니다.
        */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh; /* 최소 높이를 뷰포트 높이로 설정 */
            text-align: center; /* 텍스트 중앙 정렬 */
        }
        /*
        @section: Header Styles
        @description: 페이지 상단 헤더 영역의 스타일입니다.
                      학교 로고와 앱 제목을 포함하며, 상단에 고정됩니다.
        */
        header {
            background-color: #4CAF50;
            color: white;
            text-align: center;
            padding: 1rem;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed; /* 상단 고정 */
            top: 0;
            left: 0;
            z-index: 1000; /* 다른 요소 위에 표시 */
        }
        /*
        @section: Logo Styles
        @description: 헤더 내 학교 로고 이미지의 스타일입니다.
        */
        .logo {
            height: 50px;
            margin-right: 15px;
        }
        /*
        @section: Result Container Styles
        @description: 결과 메시지를 포함하는 컨테이너의 스타일입니다.
        */
        .result-container {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 80px; /* 헤더 공간 확보 */
        }
        /*
        @section: Success Message Styles
        @description: 분리수거 성공 시 표시되는 메시지의 스타일입니다.
        */
        .success-message {
            color: #4CAF50; /* 초록색 텍스트 */
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        /*
        @section: Fail Message Styles
        @description: 분리수거 실패 시 표시되는 메시지의 스타일입니다.
        */
        .fail-message {
            color: #f44336; /* 빨간색 텍스트 */
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        /*
        @section: Score Info Styles
        @description: 획득 점수 정보를 표시하는 텍스트의 스타일입니다.
        */
        .score-info {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 1rem;
        }
        /*
        @section: Reason Info Styles
        @description: 실패 사유를 표시하는 텍스트의 스타일입니다.
        */
        .reason-info {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 2rem;
        }
        /*
        @section: Countdown Styles
        @description: 자동 리다이렉트까지 남은 시간을 표시하는 카운트다운 텍스트의 스타일입니다.
        */
        .countdown {
            font-size: 1rem;
            color: #777;
            margin-top: 1rem;
        }
        /*
        @section: Button Styles
        @description: '메인으로 바로가기' 버튼의 스타일입니다.
        */
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <!--
    @section: Header Section
    @description: 웹 페이지의 상단 헤더 영역입니다.
                  학교 로고와 '분리수GO' 제목을 포함합니다.
    -->
    <header>
        <img src="/static/images/logo.webp" alt="학교 로고" class="logo">
        <h1>분리수GO</h1>
    </header>

    <!--
    @section: Result Content Container
    @description: 분리수거 결과 메시지를 표시하는 메인 콘텐츠 영역입니다.
    -->
    <div class="result-container">
        <!--
        @element: 결과 메시지 (성공/실패)
        @description: Flask 백엔드에서 전달받은 'status' 값에 따라 성공 또는 실패 메시지를 표시합니다.
        -->
        {% if status == 'success' %}
            <p class="success-message">🎉 분리수거 성공! 🎉</p>
            <p class="score-info">+10점 획득! 현재 점수: {{ score | default('알 수 없음') }}점</p>
        {% else %}
            <p class="fail-message">😢 아쉬워요! 다음에 다시 도전해주세요. 😢</p>
            <p class="reason-info">실패 사유: {{ reason }}</p>
        {% endif %}
        <!--
        @element: 카운트다운 메시지
        @description: 메인 화면으로 자동 리다이렉트까지 남은 시간을 표시합니다.
                      JavaScript를 통해 1초마다 업데이트됩니다.
        -->
        <p class="countdown" id="countdown">5초 후 메인 화면으로 돌아갑니다...</p>
        <!--
        @element: 메인으로 바로가기 버튼
        @description: 클릭 시 즉시 메인 화면으로 이동하는 버튼입니다.
        -->
        <button onclick="window.location.href='/'">메인으로 바로가기</button>
    </div>

    <!--
    @section: JavaScript Logic
    @description: 일정 시간 후 메인 화면으로 자동 리다이렉트하는 카운트다운 로직을 담당하는 JavaScript 코드입니다.
    -->
    <script>
        let countdown = 5; // 초기 카운트다운 시간 (초)
        const countdownElement = document.getElementById('countdown'); // 카운트다운 텍스트를 표시할 요소

        /*
        @function: updateCountdown
        @description: 1초마다 카운트다운 시간을 업데이트하고, 0이 되면 메인 화면으로 리다이렉트합니다.
        @param: None
        @returns: void
        */
        function updateCountdown() {
            countdownElement.textContent = `${countdown}초 후 메인 화면으로 돌아갑니다...`; // 텍스트 업데이트
            if (countdown === 0) {
                window.location.href = '/'; // 카운트다운이 0이 되면 메인 페이지로 이동
            } else {
                countdown--; // 카운트다운 감소
                setTimeout(updateCountdown, 1000); // 1초 후 다시 함수 호출
            }
        }

        // 페이지 로드 후 1초 뒤부터 카운트다운 시작
        setTimeout(updateCountdown, 1000);
    </script>
</body>
</html>
